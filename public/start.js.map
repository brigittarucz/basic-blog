{"version":3,"file":"start.js","sourceRoot":"","sources":["../client/start.ts"],"names":[],"mappings":"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","sourcesContent":["console.log(\"I am the client\");\n\n(async () => {\n    const res = await fetch(\"http://localhost:3000/start\");\n    console.log(await res.text());\n})();\n\nconst getElement = (el: string) => document.querySelector(el);\n\nconst domSelectors = {\n    mazeContainer: \".maze-container\",\n    mazeTemplate: \"#maze-square-template\",\n    mazeSize: \".maze-size\",\n    mazeSquare: \".maze-square\",\n    mazeForm: \".maze-form\",\n    mazeSizeDisplay: \".maze-size-display\",\n};\n\ninterface maze {\n    size: number;\n    mazeArr: string[];\n}\n\n// ADD currying\nconst addEvent = (domElement: string, event: string, fn: (e) => void) =>\n    getElement(domElement).addEventListener(event, fn);\n\nconst removeEvent = (domElement: string, event: string, fn: (e) => void) =>\n    getElement(domElement).removeEventListener(event, fn);\n\nconst initialize = function () {\n    const addEvents = () => {\n        addEvent(domSelectors.mazeSize, \"input\", handleMazeSize);\n        addEvent(domSelectors.mazeForm, \"submit\", handleSubmit);\n    };\n\n    const cleanupEvents = () => {\n        removeEvent(domSelectors.mazeSize, \"input\", handleMazeSize);\n        removeEvent(domSelectors.mazeForm, \"submit\", handleSubmit);\n    };\n\n    return {\n        addEvents,\n        cleanupEvents,\n    };\n};\n\nconst useState = () => {\n    let state = {\n        size: 10,\n        mazeArr: [],\n    };\n\n    return {\n        // In order to call 'state' as a prop not as a method\n        get state() {\n            return state;\n        },\n        setState: (newMaze: maze) => {\n            state = { ...newMaze };\n        },\n    };\n};\n\nconst mazeState = useState();\n\nconst handleMazeSize = (e: InputEvent) => {\n    const newMaze: maze = {\n        size: Number((e.target as HTMLInputElement).value),\n        mazeArr: [],\n    };\n\n    mazeState.setState(newMaze);\n    document.querySelectorAll(domSelectors.mazeSizeDisplay).forEach((item) => {\n        item.textContent = String(mazeState.state.size);\n    });\n};\n\nconst handleSubmit = (e: Event) => {\n    e.preventDefault();\n    const data = new FormData(<HTMLFormElement>e.target);\n    const mazeSizeInput = Number(data.get(\"mazeSize\"));\n\n    if (mazeSizeInput > 16 || mazeSizeInput < 8 || !String(mazeSizeInput)) {\n        return;\n    }\n\n    createMaze();\n};\n\nfunction createMaze() {\n    const container = getElement(domSelectors.mazeContainer) as HTMLElement;\n\n    if (container.children.length) {\n        container.innerHTML = \"\";\n    }\n\n    container.style.gridTemplateColumns = `repeat(${mazeState.state.size}, 1fr)`;\n    container.style.gridTemplateRows = `repeat(${mazeState.state.size}, 1fr)`;\n\n    const template = getElement(\n        domSelectors.mazeTemplate\n    ) as HTMLTemplateElement;\n\n    let rowBooleans = \"\";\n\n    for (let i = 0; i < Math.pow(mazeState.state.size, 2); i++) {\n        const templateCopy = template.content.cloneNode(true);\n\n        if (Math.round(Math.random())) {\n            (<HTMLDivElement>(\n                (<HTMLTemplateElement>templateCopy).querySelector(\n                    \".maze-square\"\n                )\n            )).style.backgroundColor = \"black\";\n\n            if (i % mazeState.state.size !== 0 || i === 0) {\n                rowBooleans += 0;\n            } else {\n                rowBooleans += \" 0\";\n            }\n        } else {\n            if (i % mazeState.state.size !== 0 || i === 0) {\n                rowBooleans += 1;\n            } else {\n                rowBooleans += \" 1\";\n            }\n        }\n        container.appendChild(templateCopy);\n    }\n\n    mazeState.setState({\n        ...mazeState.state,\n        mazeArr: rowBooleans.split(\" \"),\n    });\n\n    validateMaze();\n}\n\n// Compose dir type\ntype dirT = Record<string, unknown> | boolean;\n\nclass NodeClass {\n    constructor(\n        public posX: number,\n        public posY: number,\n        public dirLeft: dirT,\n        public dirRight: dirT,\n        public dirTop: dirT,\n        public dirBottom: dirT\n    ) {}\n}\n\nfunction getLeft(currentPosX, currentPosY, mdMaze) {\n    if (currentPosX === 0) {\n        return false;\n    }\n\n    return mdMaze[currentPosY][currentPosX - 1]\n        ? { childPosX: currentPosX - 1, childPosY: currentPosY }\n        : false;\n}\n\nfunction getRight(currentPosX, currentPosY, mdMaze) {\n    if (currentPosX === mdMaze[0].length - 1) {\n        return false;\n    }\n\n    return mdMaze[currentPosY][currentPosX + 1]\n        ? { childPosX: currentPosX + 1, childPosY: currentPosY }\n        : false;\n}\n\nfunction getTop(currentPosX, currentPosY, mdMaze) {\n    if (currentPosY === 0) {\n        return false;\n    }\n\n    return mdMaze[currentPosY - 1][currentPosX]\n        ? { childPosX: currentPosX, childPosY: currentPosY - 1 }\n        : false;\n}\n\nfunction getBottom(currentPosX, currentPosY, mdMaze) {\n    if (currentPosY === mdMaze[0].length - 1) {\n        return false;\n    }\n    return mdMaze[currentPosY + 1][currentPosX]\n        ? { childPosX: currentPosX, childPosY: currentPosY + 1 }\n        : false;\n}\n\nfunction validateMaze() {\n    const mazeArr = mazeState.state.mazeArr;\n    const mazeSize = mazeState.state.size;\n\n    // Build multidimensional arr\n    const multidimensionalMaze = [];\n    for (let i = 0; i < mazeArr.length; i++) {\n        multidimensionalMaze[i] = [];\n        console.log(mazeArr[i]);\n        for (let j = 0; j < mazeArr[i].length; j++) {\n            multidimensionalMaze[i].push(Number(mazeArr[i][j]));\n        }\n        multidimensionalMaze.push(multidimensionalMaze[i]);\n    }\n\n    const initPosX =\n        multidimensionalMaze[0].find((emptySquare, emptySquareIndex) => {\n            console.log(multidimensionalMaze);\n            console.log(emptySquareIndex);\n            if (emptySquare === 1) {\n                return emptySquareIndex;\n            }\n        }) - 1;\n\n    // Initialize dfs root node\n    const dfs = new NodeClass(\n        initPosX,\n        0,\n        getLeft(initPosX, 0, multidimensionalMaze),\n        getRight(initPosX, 0, multidimensionalMaze),\n        getTop(initPosX, 0, multidimensionalMaze),\n        getBottom(initPosX, 0, multidimensionalMaze)\n    );\n\n    // Depth first search\n    console.log(multidimensionalMaze);\n    console.log(dfs);\n}\n\ninitialize().addEvents();\n"]}