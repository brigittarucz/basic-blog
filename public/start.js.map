{"version":3,"file":"start.js","sourceRoot":"","sources":["../client/start.ts"],"names":[],"mappings":"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","sourcesContent":["console.log(\"I am the client\");\n\n(async () => {\n    const res = await fetch(\"http://localhost:3000/start\");\n    console.log(await res.text());\n})();\n\nconst getElement = (el: string) => document.querySelector(el);\n\nconst domSelectors = {\n    mazeContainer: \".maze-container\",\n    mazeTemplate: \"#maze-square-template\",\n    mazeSize: \".maze-size\",\n    mazeSquare: \".maze-square\",\n    mazeForm: \".maze-form\",\n    mazeSizeDisplay: \".maze-size-display\",\n};\n\ninterface maze {\n    size: number;\n}\n\n// ADD currying\nconst addEvent = (domElement: string, event: string, fn: (e) => void) =>\n    getElement(domElement).addEventListener(event, fn);\n\nconst removeEvent = (domElement: string, event: string, fn: (e) => void) =>\n    getElement(domElement).removeEventListener(event, fn);\n\nconst initialize = function () {\n    const addEvents = () => {\n        addEvent(domSelectors.mazeSize, \"input\", handleMazeSize);\n        addEvent(domSelectors.mazeForm, \"submit\", handleSubmit);\n    };\n\n    const cleanupEvents = () => {\n        removeEvent(domSelectors.mazeSize, \"input\", handleMazeSize);\n        removeEvent(domSelectors.mazeForm, \"submit\", handleSubmit);\n    };\n\n    return {\n        addEvents,\n        cleanupEvents,\n    };\n};\n\nconst useState = () => {\n    let state = {\n        size: 0,\n    };\n\n    return {\n        // In order to call 'state' as a prop not as a method\n        get state() {\n            return state;\n        },\n        setState: (newMaze: maze) => {\n            state = { ...newMaze };\n        },\n    };\n};\n\nconst mazeState = useState();\n\nconst handleMazeSize = (e: InputEvent) => {\n    const newMaze: maze = {\n        size: Number((e.target as HTMLInputElement).value),\n    };\n\n    mazeState.setState(newMaze);\n    document.querySelectorAll(domSelectors.mazeSizeDisplay).forEach((item) => {\n        item.textContent = String(mazeState.state.size);\n    });\n};\n\nconst handleSubmit = (e: Event) => {\n    e.preventDefault();\n    const data = new FormData(<HTMLFormElement>e.target);\n    const mazeSizeInput = Number(data.get(\"mazeSize\"));\n\n    if (mazeSizeInput > 16 || mazeSizeInput < 8 || !String(mazeSizeInput)) {\n        return;\n    }\n\n    createMaze();\n};\n\nfunction createMaze() {\n    const container = getElement(domSelectors.mazeContainer) as HTMLElement;\n\n    if (container.children.length) {\n        container.innerHTML = \"\";\n    }\n\n    container.style.gridTemplateColumns = `repeat(${mazeState.state.size}, 1fr)`;\n    container.style.gridTemplateRows = `repeat(${mazeState.state.size}, 1fr)`;\n\n    const template = getElement(\n        domSelectors.mazeTemplate\n    ) as HTMLTemplateElement;\n\n    for (let i = 0; i < Math.pow(mazeState.state.size, 2); i++) {\n        const templateCopy = template.content.cloneNode(true);\n        if (Math.round(Math.random())) {\n            (<HTMLDivElement>(\n                (<HTMLTemplateElement>templateCopy).querySelector(\n                    \".maze-square\"\n                )\n            )).style.backgroundColor = \"black\";\n        }\n        container.appendChild(templateCopy);\n    }\n}\n\ninitialize().addEvents();\n"]}